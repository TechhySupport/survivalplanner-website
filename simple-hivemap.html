<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HiveMap Editor - Simple</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #0f172a 0%, #1f2937 100%);
      color: white;
      overflow: hidden;
    }
    
    .header {
      background: rgba(30, 58, 138, 0.9);
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 2px 10px rgba(0,0,0,0.3);
    }
    
    .title {
      font-size: 24px;
      font-weight: bold;
    }
    
    .grid-container {
      width: 100vw;
      height: calc(100vh - 60px);
      position: relative;
      overflow: auto;
      background: #1a1a2e;
    }
    
    .grid {
      width: 2000px;
      height: 2000px;
      background-image: 
        linear-gradient(#333 1px, transparent 1px),
        linear-gradient(90deg, #333 1px, transparent 1px);
      background-size: 40px 40px;
      position: relative;
      margin: 20px;
    }
    
    .grid-cell {
      width: 38px;
      height: 38px;
      border: 1px solid #444;
      position: absolute;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .grid-cell:hover {
      background: rgba(59, 130, 246, 0.3);
      border-color: #3b82f6;
    }
    
    .grid-cell.occupied {
      background: #ef4444;
      border-color: #dc2626;
    }
    
    .grid-cell.bear-trap {
      background: #f59e0b;
      border-color: #d97706;
    }
    
    .grid-cell.member {
      background: #10b981;
      border-color: #059669;
    }
    
    .toolbar {
      position: fixed;
      top: 70px;
      right: 20px;
      background: rgba(0,0,0,0.8);
      padding: 15px;
      border-radius: 8px;
      min-width: 200px;
    }
    
    .tool-button {
      display: block;
      width: 100%;
      padding: 10px;
      margin: 5px 0;
      background: #374151;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      transition: background 0.2s;
    }
    
    .tool-button:hover {
      background: #4b5563;
    }
    
    .tool-button.active {
      background: #3b82f6;
    }
    
    .coordinates {
      position: fixed;
      bottom: 20px;
      left: 20px;
      background: rgba(0,0,0,0.8);
      padding: 10px;
      border-radius: 4px;
      font-family: monospace;
    }
  </style>
</head>
<body>
  <div class="header">
    <div class="title">üó∫Ô∏è HiveMap Editor</div>
    <div>Simple Grid Editor</div>
  </div>
  
  <div class="toolbar">
    <button class="tool-button active" onclick="setTool('member')">üë§ Place Member</button>
    <button class="tool-button" onclick="setTool('bear-trap')">üêª Bear Trap</button>
    <button class="tool-button" onclick="setTool('occupied')">üè† Occupied</button>
    <button class="tool-button" onclick="setTool('clear')">üßπ Clear Cell</button>
    <hr style="border-color: #555;">
    <button class="tool-button" onclick="clearAll()">üóëÔ∏è Clear All</button>
    <button class="tool-button" onclick="exportMap()">üíæ Export</button>
  </div>
  
  <div class="grid-container">
    <div class="grid" id="grid"></div>
  </div>
  
  <div class="coordinates" id="coordinates">X: 0, Y: 0</div>

  <script>
    let currentTool = 'member';
    let gridData = {};
    
    function setTool(tool) {
      currentTool = tool;
      document.querySelectorAll('.tool-button').forEach(btn => {
        btn.classList.remove('active');
      });
      event.target.classList.add('active');
    }
    
    function createGrid() {
      const grid = document.getElementById('grid');
      const gridSize = 50; // 50x50 grid
      
      for (let y = 0; y < gridSize; y++) {
        for (let x = 0; x < gridSize; x++) {
          const cell = document.createElement('div');
          cell.className = 'grid-cell';
          cell.style.left = (x * 40) + 'px';
          cell.style.top = (y * 40) + 'px';
          cell.dataset.x = x;
          cell.dataset.y = y;
          
          cell.addEventListener('click', () => handleCellClick(x, y, cell));
          cell.addEventListener('mouseenter', () => updateCoordinates(x, y));
          
          grid.appendChild(cell);
        }
      }
    }
    
    function handleCellClick(x, y, cell) {
      const key = `${x},${y}`;
      
      if (currentTool === 'clear') {
        delete gridData[key];
        cell.className = 'grid-cell';
      } else {
        gridData[key] = currentTool;
        cell.className = `grid-cell ${currentTool}`;
      }
    }
    
    function updateCoordinates(x, y) {
      document.getElementById('coordinates').textContent = `X: ${x}, Y: ${y}`;
    }
    
    function clearAll() {
      if (confirm('Clear all placements?')) {
        gridData = {};
        document.querySelectorAll('.grid-cell').forEach(cell => {
          cell.className = 'grid-cell';
        });
      }
    }
    
    function exportMap() {
      const data = {
        grid: gridData,
        timestamp: new Date().toISOString(),
        size: 50
      };
      
      const blob = new Blob([JSON.stringify(data, null, 2)], {
        type: 'application/json'
      });
      
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `hivemap-${Date.now()}.json`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    }
    
    // Initialize the grid when page loads
    window.addEventListener('load', createGrid);
  </script>
</body>
</html>